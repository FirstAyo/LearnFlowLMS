$(async function(){ await OLP.loadData(); const id = OLP.getParam('id'); const idx = parseInt(OLP.getParam('lesson') || '0', 10); const course = OLP.findCourseById(id); if (!course) { location.href = '404.html'; return; } const l = course.lessons[idx]; if (!l) { location.href = `learn.html?id=${encodeURIComponent(course.id)}&lesson=0`; return; } $('#learnCourse').text(course.title); $('#learnLesson').text(l.title); $('#lessonType').text(l.type === 'video' ? 'ðŸŽ¬ Video' : 'ðŸ“„ Reading'); const contentEl = $('#lessonContent'); contentEl.empty(); if (l.type === 'video') { contentEl.append(`<div class="card"><video src="" controls style="width:100%;border-radius:.6rem;background:#000;height:340px"></video><div class="meta" style="margin-top:.5rem">Demo video URL placeholder (${l.content})</div></div>`); } else { contentEl.append(`<div class="card"><p>${l.content}</p></div>`); } const prev = Math.max(0, idx-1); const next = Math.min(course.lessons.length-1, idx+1); $('#prevLesson').attr('href', `learn.html?id=${encodeURIComponent(course.id)}&lesson=${prev}`); $('#nextLesson').attr('href', `learn.html?id=${encodeURIComponent(course.id)}&lesson=${next}`); $('#toQuiz').attr('href', `quiz.html?id=${encodeURIComponent(course.id)}`); });