$(async function(){ await OLP.loadData(); const data = OLP.data; if (!data) return; const catEl = $('#homeCategories'); const cats = data.categories; cats.forEach(cat => { catEl.append(` <a class="card" href="category.html?name=${encodeURIComponent(cat)}"> <div class="kicker">Category</div> <h3>${cat}</h3> <div class="meta">${data.courses.filter(c => c.category===cat).length} courses</div> </a> `); }); const list = [...data.courses].sort((a,b)=>b.rating-a.rating).slice(0,8); const grid = $('#homeFeatured'); list.forEach(c => { grid.append(` <a class="card" href="course.html?id=${encodeURIComponent(c.id)}"> <img src="${c.image}" alt="" style="width:100%;height:140px;object-fit:cover;border-radius:.6rem;border:1px solid var(--border)"> <h3>${c.title}</h3> <div class="meta">${c.category} • ${c.level} • ${OLP.fmtPrice(c.price)}</div> <div class="meta">${OLP.star(c.rating)} (${c.rating})</div> </a> `); }); $('#homeSearchForm').on('submit', function(e){ e.preventDefault(); const q = $('#homeSearchInput').val().trim(); if (q) location.href = `search.html?q=${encodeURIComponent(q)}`; }); });