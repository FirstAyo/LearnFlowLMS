$(async function(){ await OLP.loadData(); const q = (OLP.getParam('q') || '').toLowerCase(); $('#query').val(q); const wrap = $('#searchResults'); function run(){ wrap.empty(); const term = $('#query').val().toLowerCase(); const courses = OLP.data.courses.filter(c => c.title.toLowerCase().includes(term) || c.description.toLowerCase().includes(term) || c.category.toLowerCase().includes(term) ); if (courses.length === 0) { wrap.html('<div class="notice">No results. Try another keyword.</div>'); return; } courses.forEach(c => { wrap.append(` <div class="card course-row"> <img src="${c.image}" alt=""> <div> <div class="title"><a href="course.html?id=${encodeURIComponent(c.id)}">${c.title}</a></div> <div class="desc">${c.description}</div> <div class="tags"> <span class="badge">${c.category}</span> <span class="badge">${c.level}</span> <span class="badge">${OLP.fmtPrice(c.price)}</span> </div> </div> </div> `); }); } run(); $('#searchForm').on('submit', function(e){ e.preventDefault(); run(); }); });